绘制等值线地图，第1部分：创建样式

一种方法在地图上显示数据分布的是使用等值线，一种基于特定值对区域进行着色的主题地图。在本指南中，您将使用Mapbox Studio和Mapbox GL JS绘制一张显示人口密度的美国各州地图。（如果您熟悉Leaflet，这张地图可能看起来会很熟悉！）

准备开始

在本指南中，您将使用两个MapBox工具：
Mapbox Studio用于添加数据和创建地图样式
Mapbox GL JS为地图添加交互并在网页上展示。

下载数据

对于本指南，您需要下载一些数据。这个GeoJSON文件是从Leaflet的等值线教程引用来的，包含了美国各州人口密度的数据。

上传您的数据

为了将人口密度数据添加为Mapbox Studio中的一个样式，您需要将其上传到您的帐户。请去到您的Mapbox Studio中的Tilesets页面上传数据。

在您的Tilesets页面上，点击新建Tilesets按钮。选择statedata.geojson文件并将其上传到您的帐户。

上传完成后，单击文件名旁边的箭头打开其信息页。

检查tileset

当您将矢量数据上传到Mapbox帐户时，我们的服务器会将其转换为矢量平铺集，以便可以在Mapbox Studio样式编辑器和Mapbox GL JS中快速高效地呈现它。tileset信息页展示了有关从您上传的数据创建的tileset的一些有用信息。



在图的中间，您可以看到原始geojson文件的属性：density和name。上传的tileset保留了原始数据文件的属性，在为tileset添加样式规则时可以使用这些属性。

Tileset ID是此tileset的唯一标识符。

Format, Type, Size, 和 Bounds提供了关于此tileset的基本信息。


创建一个新样式

检查完数据后，是时候创建一个新样式了以便您可以将其放到地图上！跳转至样式页。单击新建样式按钮。找到基本样式模板，然后点击自定义基本模板。

太棒了！欢迎使用Mapbox Studio样式编辑器。这是您要创建您的地图样式的地方。

重命名样式方便之后可以找到它。单击屏幕左上角的标题区域，将标题从Basic Template更改为Population。

如果这是您第一次使用样式编辑器，请阅读mapbox studio手册以了解有关入门的详细信息。

添加新层

要添加人口密度数据并设置其样式，您需要向地图中添加新图层。在层面板的顶部，点击+ Add layer.

编辑器现在以x-ray模式显示地图。X-ray模式显示了添加到样式源中的所有数据，不管是否有图层来设置样式。

在新建层面板中，查看statedata源的数据源列表。单击tileset，然后选择源图层作为此新样式图层的源。

默认的基本地图视图中心点不是美国。Mapbox Studio识别到您上传的数据集中在不同的位置，因此它会显示 “此tileset在您的地图视图中不可用” 的提示信息。点击“Go to data”，然后地图视图将重新将中心点设置为美国。

新图层将在X射线地图上高亮显示。

点击Style选项卡，地图将切换回显示新图层的样式模式。您将在地图上看到默认样式的州数据（黑色，不透明度为100%）。

您可以通过点击面板顶部的图层名称重命名图层。重命名新图层州数据。

设置图层样式

在最原始的Leaflet地图上，数据样式是基于每个州的人口密度来生成的：

数据驱动样式

在Mapbox Studio样式编辑器中，可以根据每个州的人口密度为其指定颜色。点击州数据图层的Style链接。接下来，点击Style across data range。

在选择数值数据字段下，选择密度这个选项，因为想要根据每个州的人口密度来设置其样式。
变化率是线性的。点击 Edit，然后选择Step。点击Done.。由于已将变化率设置为匀速，因此两个点之间的每个密度范围的颜色都将是统一的。

现在是时候开始添加点和颜色了！您将创建几个点以将州划分成具有相似人口密度的组。点击第一个密度点中的Edit。根据您上传的数据中的信息，第一个点设定在1.264。点击它并将颜色更改为#FFEDA0。点击Done。

将下一个点的密度更改为10，并将颜色更改为#FFEDA0。点击Done

点击+ Add another stop。将密度更改为20，并将颜色更改为#FED976。点击 Done。

创建以下附加的点：
•	50: #FEB24C
•	100: #FD8D3C
•	200: #FC4E2A
•	500: #E31A1C
•	1000: #BD0026

当您开始添加点时，您将看到右侧的地图的变化以反映新点。在这种情况下，人口密度在0-10之间的所有州将被指定为 #FFEDA0颜色，人口密度在10-20之间的所有州将被指定为 #FED976颜色，依此类推。

为你的州添加一个精致的轮廓样式并减少它们的不透明度，以帮助你的读者区分相邻的州。将不透明度更改为0.6。接下来，将1px stroke样式属性更改为 #FFF。


重新排列图层

创建并设置图层样式后，您的地图应如下所示：

一切看起来都不错，除了一件事 - 标签在数据层下面！Mapbox Studio样式编辑器最酷的一点是，您可以对地图的任意元素重新排序。这意味着您可以在您的数据上加上标签。

将鼠标悬停在您的州数据层上。在最左侧的图层列表中点击图层名称旁边的列表符号，然后将图层拖到标签下方。

现在，人口密度数据中的标签是最重要的，而城市标签则出现在更重要的州标签之上。若要关闭城市标签，请点击 Filter layers 并键入place.。这将返回所有城市标签层。按住command（Mac）或CTRL（Windows）同时点击这些层，可以同时选择多个层。接下来，单击层窗格顶部的按钮以关闭这些层的可见性。

要使州之间的边界更明显，可以将admin-state-province图层移动到图层列表中州数据图层的上方。

发布样式

现在你的地图看起来不错，是时候发布了！点击屏幕右上角的Publish按钮，然后在下一次提示中再次点击Publish。

哇哦！你的样式现在发布了！如果返回样式页，您将在列表顶部看到您的新样式。

下一步

进入第2部分学习如何向地图添加交互元素，并使用Mapbox GL JS将其发布到Web。
